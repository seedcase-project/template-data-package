_subdirectory: template

# Post-copy commands:
_tasks:
  # Only run these commands when copying the template
  - command: "git init"
    when: "{{ _copier_operation == 'copy' }}"
  - command: "uv add --dev pre-commit commitizen ruff typos"
    when: "{{ _copier_operation == 'copy' }}"
  - command: "uv add polars seedcase-sprout"
    when: "{{ _copier_operation == 'copy' }}"
  - command: "git add ."
    when: "{{ _copier_operation == 'copy' }}"
  - command: "git commit -m 'chore: :tada: setup a new data package from the template'"
    when: "{{ _copier_operation == 'copy' }}"

# Questions:
package_github_repo:
  type: str
  help: "What is the GitHub repository spec for the package?"
  placeholder: "user/repo"
  validator: |
    {% if package_github_repo and not (package_github_repo | regex_search('^[\w.-]+\/[\w.-]+$')) %}
    Must be in the format `user/repo` and contain only alphanumeric characters and `_`, `-`, or `.`.
    {% endif %}

author_given_name:
  type: str
  help: "What is your first/given name?"

author_family_name:
  type: str
  help: "What is your last/family name?"

author_email:
  type: str
  help: "What is your email address?"

package_abbrev:
  type: str
  help: "What is the abbreviated name of the package? This could be the name of your GitHub repository and should be a short, lowercase name without spaces or special characters. For example, 'template-data-package'."
  default: "{{ _copier_conf.dst_path | basename }}"

review_team:
  type: str
  help: What GitHub team is responsible for reviewing pull requests?
  default: >-
    {{ "@%s/developers" % package_github_repo.split('/')[0] if package_github_repo else "" }}

github_board_number:
  type: str
  help: "What is the number of the GitHub project board to add issues and PRs to?"
  validator: |
    {% if github_board_number and not github_board_number.isdigit() %}
    The board number must be an integer.
    {% endif %}
